# This is a Databricks asset bundle definition for NY Texi.
# The Databricks extension requires databricks.yml configuration file.
# See https://docs.databricks.com/dev-tools/bundles/index.html for documentation.

bundle:
  name: NY Texi

# Sync patterns - exclude files from upload to Databricks
sync:
  exclude:
    - .venv
    - venv
    - __pycache__
    - "*.pyc"
    - .git
    - .gitignore
    - .databricks
    - "*.md"
    - .vscode
    - .idea

# Include additional configuration files
include:
  - resources/*.yml

# Variables from variables.yml
variables:
  catalog_name:
    description: "Unity Catalog catalog name"
    default: "gm_demo"
  
  warehouse_id:
    description: "SQL Warehouse ID for queries"
    default: ""  # TODO: Set your SQL Warehouse ID
  
  storage_account:
    description: "Azure Storage account name"
    default: ""  # TODO: Set for production ADLS access
  
  landing_container:
    description: "Container for landing parquet files"
    default: "taxi-landing"
  
  source_data_path:
    description: "Path to source parquet files"
    default: "/Volumes/gm_demo/default/ny_texi"
  
  cluster_node_type:
    description: "Node type for data processing clusters"
    default: "Standard_DS4_v2"
  
  min_workers:
    description: "Minimum number of workers for autoscaling"
    default: 2
  
  max_workers:
    description: "Maximum number of workers for autoscaling"
    default: 8
  
  notification_email:
    description: "Email for job notifications"
    default: ""  # TODO: Set your email
  
  data_engineers_group:
    description: "Group name for data engineers"
    default: "data_engineers"

# Workspace configuration
workspace:
  root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}
  file_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}/files

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://adb-2639425068981830.10.azuredatabricks.net
    variables:
      catalog_name: gm_demo

  ## Production target (uncomment and configure when ready)
  # prod:
  #   mode: production
  #   workspace:
  #     host: https://adb-2639425068981830.10.azuredatabricks.net
  #   variables:
  #     catalog_name: prod_nyc_taxi_data
  #     source_data_path: "abfss://taxi-landing@yourstorageaccount.dfs.core.windows.net/Dataset"
